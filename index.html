<!DOCTYPE html>
<html>
    <head>
        <title>Rock - Paper - Scissors!</title>
        <meta charset="UTF-8">
    </head>
    <body>
        <script>
            let choice = ['Rock', 'Paper', 'Scissors'];

            function computerPlay()
            {
                return choice[Math.floor(Math.random(), 3)];
            }

            function capitalize(string)
            {
                let lowercase = string.toLowerCase();
                let firstLetter = string[0];
                let result = lowercase.replace(lowercase[0], firstLetter.toUpperCase());
                return result;
            }

            function playRound(playerSelection, computerSelection)
            {
                switch(true)
                {
                    case playerSelection === computerSelection:
                        return 'draw';
                    case playerSelection === 'Rock' && computerSelection === 'Paper':
                    case playerSelection === 'Paper' && computerSelection === 'Scissors':
                    case playerSelection === 'Scissors' && computerSelection === 'Rock':
                        return 'lose';
                    case playerSelection === 'Rock' && computerSelection === 'Scissors':
                    case playerSelection === 'Paper' && computerSelection === 'Rock':
                    case playerSelection === 'Scissors' && computerSelection === 'Paper':
                        return 'win';
                    default:
                        return 'invalid';
                }
            }

            // const playerSelection = 'rock';
            // const computerSelection = computerPlay();
            // console.log(playRound(playerSelection, computerSelection));

            function game()
            {
                let playerScore = 0, computerScore = 0;
                let playerSelection, computerSelection;
                for (let round = 1; round <= 5; round++)
                {
                    computerSelection = computerPlay();
                    playerSelection = prompt(`Round ${round}! Your choice: Rock - Paper - Scissors?`,'');
                    if (playerSelection !== null && playerSelection !== '')
                        playerSelection = capitalize(playerSelection);
                    switch(playRound(playerSelection, computerSelection))
                    {
                        case 'draw':
                            console.log('Draw!');
                            break;
                        case 'lose':
                            console.log(`You lose! ${computerSelection} beats ${playerSelection}`);
                            computerScore++;
                            break;
                        case 'win':
                            console.log(`You win! ${playerSelection} beats ${computerSelection}`);
                            playerScore++;
                            break;
                        case 'invalid':
                            console.log('Invalid choice! Try again.');
                            round--;
                            break;
                    }
                }

                if (playerScore > computerScore)
                    console.log('You won the game! Congratulations!');
                else if (playerScore < computerScore)
                    console.log('You lost the game! Better luck next time!');
                else
                    console.log("It's a tie!");
            }
            game();
        </script>
    </body>
</html>